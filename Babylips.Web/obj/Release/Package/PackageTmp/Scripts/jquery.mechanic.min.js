function isIE(){var n=navigator.userAgent.toLowerCase();n.indexOf("msie")!=-1&&parseInt(n.split("msie")[1])<10&&(setCurrentTime=!1)}function preLoadVideo(n,t){var i=new XMLHttpRequest,r;i.onreadystatechange=function(){i.readyState==4&&i.status==200};i.onload=function(){document.getElementById(t).src=pathVideoRoot+n;vidPreLoadedCanPlay(t)};try{r=pathVideoRoot+n;i.open("GET",r);i.responseType="blob";i.send()}catch(u){document.getElementById(t).src=pathVideoRoot+n;vidPreLoadedCanPlay(t)}}function gVideoUpdateProgress(n){if(n.lengthComputable)var t=n.loaded/n.total*100}function vidPreLoadedCanPlay(n){$("#"+n).on("canplaythrough",function(){preLoadedEnd(n)})}function bindDragDropEvents(){$(".videoContainer").droppable({accept:".sample",hoverClass:"videoContainerHover",drop:addToTimeline,zIndex:1});$(".sample").draggable({stack:".videoContainer",scroll:!1,revert:!0})}function getSamplePath(n,t){var i=sampleShortRoot;return i.replace("{GROUPNO}",n).replace("{SAMPLENO}",t)}function addToTimeline(event,ui){var sampleNo=ui.draggable.data("sample-no"),sampleGroup=$(ui.draggable).parent("div").attr("data-sample-group"),lipsHasItem=eval($(this).attr("data-lips-has-item"));lipsHasItem||($(ui.draggable).css("visibility","hidden"),$(this).attr("data-lips-sample-group",sampleGroup),$(this).attr("data-lips-sample-no",sampleNo),$(this).attr("data-lips-has-item",!0),$(this).addClass("group"+sampleGroup),$(this).children(".lipsBorder").show(),$(this).children(".vidLoading").show(),bindLipsEditEvents($(this)),playShortVideo($(this),sampleGroup,sampleNo),recordingOnAction($(this).attr("data-lips-item-no"),g_actionType.add,eval(sampleGroup),eval(sampleNo)))}function removeFromTimeline(lipsItem){var sampleGroup=lipsItem.attr("data-lips-sample-group"),sampleNo=lipsItem.attr("data-lips-sample-no"),lipsItemVideo,lipsItemVideoId;$(lipsItem).removeClass("group"+sampleGroup);$(lipsItem).children(".lipsBorder").hide();$(".recorderButtons .recordGroup[data-sample-group="+sampleGroup+"] a[data-sample-no="+sampleNo+"]").css("visibility","visible");lipsItem.attr("data-lips-has-item",!1);lipsItem.attr("data-lips-sample-group",0);lipsItem.attr("data-lips-sample-no",0);lipsItem.attr("data-playing",!1);$(lipsItem).children(".vidLoading").hide();$(lipsItem).children(".videoToolBar").hide();lipsItemVideo=$(lipsItem).children("video");lipsItemVideoId=$(lipsItem).children("video").attr("id");document.getElementById(lipsItemVideoId).pause();$(lipsItemVideo).children("source").attr("src","");$(lipsItemVideo).attr("data-loaded",!1);$(lipsItemVideo).hide();recordingOnAction(lipsItem.attr("data-lips-item-no"),g_actionType.remove,eval(sampleGroup),eval(sampleNo));unBindLipsEditEvents(lipsItem)}function bindLipsEditEvents(n){$(n).children(".videoToolBar").children("a.removeVideo").click(function(){removeFromTimeline($(this).parent().parent())});$(n).mouseover(function(){$(this).children(".videoToolBar").show()});$(n).mouseout(function(){$(this).children(".videoToolBar").hide()})}function unBindLipsEditEvents(n){$(n).unbind("mouseover");$(n).unbind("click");$(n).unbind("mouseout")}function playShortVideo(n,t,i){var r=$(n).children("video"),u=r.attr("id"),f=getSamplePath(t,i,!1);$(r).children("source").attr("src",f);$(r).prop("muted",!0);document.getElementById(u).load();$(r).on("canplaythrough",function(){$(r).attr("data-loaded",!0);isMetronomePlaying||(isMetronomePlaying=!0,vMetronomeSync(),videoMetronome.play(),vTrack())})}function allVideoPause(){videoMetronome.pause();video1.pause();video2.pause();video3.pause();video4.pause();video5.pause();video6.pause()}function vTrack(){videoMetronome.addEventListener("ended",vMetronomeSync)}function vMetronomeSync(){vLoopEnd();setCurrentTime?(videoMetronome.currentTime=0,videoMetronome.play(),$(v1s).attr("src")!=""&&(video1.currentTime=0,video1.play()),$(v2s).attr("src")!=""&&(video2.currentTime=0,video2.play()),$(v3s).attr("src")!=""&&(video3.currentTime=0,video3.play()),$(v4s).attr("src")!=""&&(video4.currentTime=0,video4.play()),$(v5s).attr("src")!=""&&(video5.currentTime=0,video5.play()),$(v6s).attr("src")!=""&&(video6.currentTime=0,video6.play())):(videoMetronome.pause(),videoMetronome.play(),$("#video1").children("source").attr("src")!=""&&(video1.pause(),video1.play()),$("#video2").children("source").attr("src")!=""&&(video2.pause(),video2.play()),$("#video3").children("source").attr("src")!=""&&(video3.pause(),video3.play()),$("#video4").children("source").attr("src")!=""&&(video4.pause(),video4.play()),$("#video5").children("source").attr("src")!=""&&(video5.pause(),video5.play()),$("#video6").children("source").attr("src")!=""&&(video6.pause(),video6.play()))}function vLoopEnd(){for(var i=1;i<=6;i++)eval($("#video"+i).parent("div").attr("data-lips-has-item"))&&(eval($("#video"+i).parent("div").attr("data-playing"))||eval($("#video"+i).attr("data-loaded"))&&($("#video"+i).next(".vidLoading").hide(),$("#video"+i).show(),$("#video"+i).prop("muted",!1),document.getElementById("video"+i).play(),$("#video"+i).parent("div").attr("data-playing",!0)))}function preLoadedEnd(n){n=="videoMetronome"&&($(".mechanicPageContainer").show(),$("#"+n).unbind("canplaythrough"))}function OpenPopUp(n){return $("#LightBox > div").hide(),$("#LightBox").show(),$("#"+n).fadeIn(fadeInTime),!1}function OpenConditions(){return $("#LightBox > div").hide(),$("#LightBox").show(),$("#ConditionsOfParticipation").load("/katilim-kosullari"),$("html, body").animate({scrollTop:0},500),$("#ConditionsOfParticipation").fadeIn(fadeInTime),!1}function OpenPrivacy(){return $("#LightBox > div").hide(),$("#LightBox").show(),$("#Privacy").load("/gizlilik"),$("html, body").animate({scrollTop:0},500),$("#Privacy").fadeIn(fadeInTime),!1}function closePopup(n){return $(n).parent().hide(),$("#LightBox").hide(),!1}function OpenSharePopUp(n){$("#LightBox > div").hide();$("#LightBox").show();$("html, body").animate({scrollTop:0},500);$("#ShareYourSong").fadeIn(fadeInTime,function(){$(".shareYourSongForm .longTextBox input").val(n).focus().select()})}function OnRecordEnd(){return $("#LightBox > div").hide(),$("#SelectSongName").load("/Mechanic/RecordEndMusicTitle"),$("#LightBox").show(),$("html, body").animate({scrollTop:0},500),$("#SelectSongName").fadeIn(fadeInTime),!1}function initCheckBox(){$(".checkBox, .checkBoxLabel").click(function(){var n=null,t=$(this).attr("for");n=typeof t!=typeof undefined&&t!==!1?$("#"+t).parent():$(this);$(n).hasClass("checked")?$(n).removeClass("checked").children("input").val(0):$(n).addClass("checked").children("input").val(1)})}function initShareBox(){$("#SongShareLink").focus().select();$("#SongShareLink").click(function(){$(this).focus().select()})}var pathVideoRoot="https://s3.eu-central-1.amazonaws.com/wandacdn/muckbox/",sampleShortRoot=pathVideoRoot+"Final/Group{GROUPNO}/{SAMPLENO}.mp4",g_recordData=[],defaultWindow="RecorderContainer",currentWindow="",fadeInTime=1e3,fadeOutTime=1e3,isMetronomePlaying=!1,setCurrentTime=!0,v1s,v2s,v3s,v4s,v5s,v6s;$(function(){isIE();bindDragDropEvents();preLoadVideo("metronome.mp4","videoMetronome");v1s=$("#video1").children("source");v2s=$("#video2").children("source");v3s=$("#video3").children("source");v4s=$("#video4").children("source");v5s=$("#video5").children("source");v6s=$("#video6").children("source")});
//# sourceMappingURL=jquery.mechanic.min.js.map
